<nav class="navbar">
  <!-- Mobile Menu Overlay -->
  <div class="mobile-menu-overlay" [class.open]="mobileMenuOpen" (click)="closeMobileMenu()"></div>

  <div class="navbar-content">
    <!-- Mobile Menu Button with SVG -->
    <button class="mobile-menu-btn" (click)="toggleMobileMenu()" aria-label="Toggle menu">
      <div class="hamburger-icon" [class.open]="mobileMenuOpen">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </button>

    <!-- Brand -->
    <a routerLink="/dashboard" class="navbar-brand" (click)="closeMobileMenu()">
      <div class="brand-container">
        <h1 class="brand-name">AI Learning Companion</h1>
        <div class="ghost">
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
        </div>
      </div>
    </a>

    <!-- Desktop Menu -->
    <div class="navbar-menu">
      <a routerLink="/dashboard" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">Dashboard</a>
      <a routerLink="/chat" routerLinkActive="active">Chat</a>
      <a routerLink="/practice" routerLinkActive="active">Practice</a>
      <a routerLink="/profile" routerLinkActive="active">Profile</a>
    </div>

    <!-- User Actions -->
    @if (currentUser) {
      <div class="navbar-actions">
        <div class="user-menu">
          <div class="user-avatar">{{ currentUser.username.charAt(0).toUpperCase() }}</div>
          <span class="user-name">{{ currentUser.username }}</span>
          <button class="btn-logout" (click)="logout()">Logout</button>
        </div>
      </div>
    }
  </div>

  <!-- Mobile Sidebar Menu with SVG Icons -->
  <div class="mobile-menu" [class.open]="mobileMenuOpen">
    <a routerLink="/dashboard" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" (click)="closeMobileMenu()">
      <span class="menu-icon">
        <svg viewBox="0 0 24 24">
          <rect x="3" y="3" width="7" height="7" rx="1"/>
          <rect x="14" y="3" width="7" height="7" rx="1"/>
          <rect x="14" y="14" width="7" height="7" rx="1"/>
          <rect x="3" y="14" width="7" height="7" rx="1"/>
        </svg>
      </span>
      Dashboard
    </a>
    <a routerLink="/chat" routerLinkActive="active" (click)="closeMobileMenu()">
      <span class="menu-icon">
        <svg viewBox="0 0 24 24">
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
        </svg>
      </span>
      Chat
    </a>
    <a routerLink="/practice" routerLinkActive="active" (click)="closeMobileMenu()">
      <span class="menu-icon">
        <svg viewBox="0 0 24 24">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
          <polyline points="14 2 14 8 20 8"/>
          <line x1="16" y1="13" x2="8" y2="13"/>
          <line x1="16" y1="17" x2="8" y2="17"/>
          <polyline points="10 9 9 9 8 9"/>
        </svg>
      </span>
      Practice
    </a>
    <a routerLink="/profile" routerLinkActive="active" (click)="closeMobileMenu()">
      <span class="menu-icon">
        <svg viewBox="0 0 24 24">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
          <circle cx="12" cy="7" r="4"/>
        </svg>
      </span>
      Profile
    </a>
    @if (currentUser) {
      <button class="btn-logout-mobile" (click)="logout(); closeMobileMenu()">
        <span class="menu-icon">
          <svg viewBox="0 0 24 24">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
            <polyline points="16 17 21 12 16 7"/>
            <line x1="21" y1="12" x2="9" y2="12"/>
          </svg>
        </span>
        Logout
      </button>
    }
  </div>
</nav>
